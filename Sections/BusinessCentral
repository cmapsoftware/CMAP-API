# Business Central Integration
The following methods relate purely to the CMAP -> Business Central integration developed by Dynavics

* `* GET v1/invoices/notimported` Returns all the Sales Invoices that are marked in CMAP as having not been imported into Business Central

[{
"InvoiceID" = "Unique ID from CMAP"
"InvoiceNumber" = "The invoice number"
"Net" = "The Net value of the invoice"
"VAT""= "Vat amount on the invoice"
"Office" = "The name of the Office the related project belongs to"
"Team" = "The name of the Team (Business Unit) the related project belongs to"
"LegalEntity" = "This is either a value from the mapped custom field or the name of the Office the related project belongs to"
"AccountName" = "The name of the Client the invoice is related to"
"ProjectCode" = "The Project's Code"
"ProjectTitle" = "The Project's Title"
"Date" = "The date of the invoice"
"InvoiceAddress1" = "First line of the address"
"InvoiceAddress2" = "Second line of the address"
"InvoiceTownCity" = "Town/City from the address"
"InvoiceCountyState" = "County/State from the address"
"InvoicePostCode" = "The PostCode from the address"
"ContactTelNo" = "The telephone number from the client contact"
"ContactName" = "The name of the contact on the invoice"
"ExtVATID" = "If the legal entity has a custom field mapping then custom list of Sales Tax IDs is checked (Grimshaw) otherwise the TCode from the VAT code is used or this is left blank"
"VATRate" = "The VAT rate (e.g. 20%)"
"PONumber" = "The PO Number on the invoice"
"Description" = "The invoice description"
"CurrencyAbbreviatedName" = "The 3 character currency abbreviation (e.g. GBP)"
"CurrencySymbol" = "The currency symbol (e.g. £)"
"SageAccountCode" = "The Account Code for the Client"
"Location" = "If there is more than one Team in the Office then the Team name for the Project is used otherwise this is blank"
"NominalCode" = "The default nominal code setting from CMAP for Sales Invoices"
"CostCentre" = "If this is an internal project (this is based on a custom field in CMAP) or the Code starts with a specified custom field prefix then is the the Project Title otherwise it's the Cost Centre Default"
"InvoiceLines" = /*FOR AEC CLIENTS*/ [{"Information" = Stage Name or External name"
"Net" = "Line amount"
"Vat" = "Line VAT amount"
"EntityType" = "Whether it's a Stage or an External"
}],
"InvoiceLines" = /*FOR NONE AEC CLIENTS*/ [{"Information" = "Invoice Line Text"
"Net" = "Line amount"
"Vat" = "Line VAT amount"
"EntityType" = "Fees OR Additionals"
"}]]


* `* GET v1/purchaseinvoices/notimported` Returns all the Purchase Invoices that are marked in CMAP as having not been imported into Business Central


[{"PurchaseTransactionID" = "The unique Purchase Transaction ID from CMAP"
"AccountName" = "The supplier/vendors name"
"Date" = "The date of the transaction"
"SageSupplierCode" = "The account code of the Supplier/Vendor"
"Currency" = "The currency symbol (e.g. £)"
"Gross" = "The Gross value"
"Net" = "The Net value (Gross-VAT)"
"VAT" = "The VAT value"
"InternalReference" = "An internal reference entered in CMAP"
"InvoiceNumber" = "The invoice number"
"CurrencyAbbreviatedName" = "The 3 character currency abbreviation (e.g. GBP)"
"CurrencySymbol" = "The currency symbol (e.g. £)"
"LegalEntity" = "If there is a custom field mapped in CMAP then this is used to determine the Legal Entity name otherwise it's the name of the Office that the project is related to"
"IsCredit" = "If the value is less that zero then this transaction is determined to be a credit"
"Lines" = [{"PurchaseTransactionID" = "The unique Purchase Transaction ID from CMAP"
"ProjectCode" = "The Project Code of the related project"
"ProjectTitle" = "The Project Title of the related project"
"InternalProject" = "Whether or no this is an internal project"
"Location" = "If this is an internal project and there are multiple Teams (business units) then it's the name of the Team (Business Unit) associated to the project otherwise if it's associated to an external in CMAP it's the name of the external. If it's neither of these then it's blank"
"Description" = "The description of the line item"
"Date" = "The date"
"DateApproved" = "The date the line item was approved"
"Nominal" = "First 8 characters of the related nominal code if there is one"
"Gross" = "The Gross value"
"Net" = "The Net value"
"VAT" = "The VAT value"
"VATRate" = "The VAT Rate"
"ExtVATID" = "If there is a Legal Entity custom field mapping in CMAP then this is used to selected the correct Purchase Expense Tax ID (Grimshaw) otherwise the TCode for the VAT rate is used if there is one"
"Office" = "The name of the office the Project belongs to"
"Team" = "If there are multiple Teams (business units) and it's an internal project then the name of the associated external is used otherwise it's the Team (business unit) name"
"CostCentre" = "If it's an internal project then the Project Title is used otherwise it's the Cost Centre Default value"
"InternalReference" = "An internal reference entered in CMAP"}]
]


* `* GET v1/expenseclaims/notimported` Returns all the Expense Claims that are marked in CMAP as having not been imported into Business Central

[{"ExpenseClaimID" = "Unique ID for this Expense Claim in CMAP"
"ExpenseClaimName" = "The name/title of the expense claim"
"SupplierCode" = "The user's supplier code"
"ClaimDate" = "The date the claim was submitted"
"DateSubmitted" = "The date the claim was submitted"
"LegalEntity" = "Custom field on a User in CMAP otherwise this is blank"
"Office" = "The name of the Office the user belongs to"
"Team" = "The name of the Team (Business Unit) that the user belongs to"
"Items" = [{"Date" = "The date the item was claimed"
"Description" = "The item description"
"Gross" = "The Gross value of the item"
"VAT" = "The tax value of the item"
"VATRate" = "The VAT rate selected for the item"
"Net" = "Gross - VAT"
"ExtVATID" = "If there is a Legal Entity custom field mapping in CMAP then this is used to selected the correct Purchase Expense Tax ID (Grimshaw) otherwise the TCode for the VAT rate is used if there is one"
"CurrencyAbbreviatedName" = "The 3 character currency abbreviation (e.g. GBP)"
"CurrencySymbol" = "The currency symbol (e.g. £)"
"ProjectCode" = "The Project Code from the project related to this expense"
"ProjectTitle" = "The Project Title from the project related to this expense"
"InternalProject" = "Whether or not this is an internal project"
"Location" = "If there is more than one Team in the Office then the Team name for the Project is used otherwise this is blank"
"NominalCode" = "If this is for an internal project then the Non Charegable Nominal Code is used otherwise the Charegable Nominal Code is used (these are set against the expense category in CMAP)"
"CostCentre" = "If this is an internal project the the Project Title is used otherwise the Cost Centre Default value is used (integration setting in CMAP)"}]
]
